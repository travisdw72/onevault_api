# 🏠 **LOCALHOST TESTING - SIMPLE INSTRUCTIONS**\n## **Test One_Barn_AI Against Your Local Database**\n\n---\n\n## 🎯 **What This Does**\n\nTests the complete One_Barn_AI setup against your **`one_vault_site_testing`** database running locally, using the exact same API endpoints that production will use.\n\n---\n\n## 🚀 **Quick Start (2 Steps)**\n\n### **Step 1: Run the Localhost Setup**\n```bash\n# From mission_7_7_25 directory\npython localhost_db_setup.py\n```\n\n**It will prompt you for:**\n- Database Host: `localhost` (press Enter)\n- Database Port: `5432` (press Enter)\n- Database Name: `one_vault_site_testing` (press Enter)\n- Username: `postgres` (or your username)\n- **Password**: **(your PostgreSQL password)**\n\n### **Step 2: Choose What to Test**\nThe script gives you 4 options:\n\n1. **Start API Server** - Runs localhost API server connected to your database\n2. **Run One_Barn_AI Setup** - Sets up demo data via API calls\n3. **Run Validation Tests** - Tests all API endpoints\n4. **Complete Setup** - Instructions for full workflow\n\n---\n\n## 📋 **Typical Testing Workflow**\n\n### **For API Development**\n```bash\n# Terminal 1: Start API server\npython localhost_db_setup.py\n# Choose option 1\n\n# Terminal 2: Run tests\npython api_validation_quick_test.py http://localhost:8000\n```\n\n### **For Demo Setup Testing**\n```bash\n# Terminal 1: Start API server\npython localhost_db_setup.py\n# Choose option 1\n\n# Terminal 2: Run One_Barn_AI setup\npython one_barn_ai_localhost_setup.py\n```\n\n---\n\n## ✅ **What Gets Tested**\n\n### **Database Connection**\n- ✅ PostgreSQL connection to `one_vault_site_testing`\n- ✅ OneVault schemas present (`auth`, `api`, `business`, `ai_agents`)\n- ✅ Database functions available\n\n### **API Layer**\n- ✅ FastAPI server startup\n- ✅ Database integration\n- ✅ All API endpoints functional\n- ✅ Authentication flow\n- ✅ AI agent creation\n\n### **One_Barn_AI Demo**\n- ✅ Tenant registration via API\n- ✅ User creation via API\n- ✅ AI agent configuration via API\n- ✅ Demo data insertion via API\n\n---\n\n## 🔧 **Configuration Details**\n\n### **Environment Variables Set Automatically**\n```bash\nSYSTEM_DATABASE_URL=postgresql://postgres:***@localhost:5432/one_vault_site_testing\nENVIRONMENT=localhost\nDEBUG=true\nLOG_LEVEL=DEBUG\n```\n\n### **API Server Details**\n- **URL**: `http://localhost:8000`\n- **Health Check**: `http://localhost:8000/health`\n- **Database Health**: `http://localhost:8000/health/db`\n- **Auto-reload**: Enabled for development\n\n---\n\n## 🆚 **Localhost vs Production Testing**\n\n| Aspect | Localhost | Production |\n|--------|-----------|------------|\n| **Database** | `one_vault_site_testing` | Cloud PostgreSQL |\n| **API URL** | `http://localhost:8000` | `https://onevault-api.onrender.com` |\n| **Speed** | ⚡ Instant | 🌐 Network latency |\n| **Debugging** | 🔍 Full access | 📊 Logs only |\n| **Data Safety** | 🛡️ Local only | ⚠️ Shared environment |\n\n---\n\n## 🐛 **Troubleshooting**\n\n### **Database Connection Issues**\n```bash\n# Check PostgreSQL is running\nps aux | grep postgres\n\n# Check database exists\npsql -l | grep one_vault_site_testing\n\n# Test direct connection\npsql -d one_vault_site_testing -U postgres\n```\n\n### **API Server Issues**\n```bash\n# Check if port 8000 is in use\nnetstat -an | grep 8000\n\n# Install missing dependencies\npip install uvicorn[standard] fastapi psycopg2-binary\n\n# Check API server manually\ncurl http://localhost:8000/health\n```\n\n### **Common Errors**\n\n**Error**: `SYSTEM_DATABASE_URL environment variable not set`\n**Solution**: Run `localhost_db_setup.py` first to set environment variables\n\n**Error**: `Database connection failed: FATAL: password authentication failed`\n**Solution**: Check your PostgreSQL password\n\n**Error**: `Could not find API server main.py file`\n**Solution**: Make sure you're running from the `mission_7_7_25` directory\n\n---\n\n## 🎉 **Success Indicators**\n\n### **Database Connection Success**\n```\n✅ Database Connection Successful!\n   Database: one_vault_site_testing\n   Version: PostgreSQL 15.4...\n   OneVault Schemas: ['auth', 'api', 'business', 'ai_agents']\n```\n\n### **API Server Success**\n```\n🎯 API Server Starting...\n   Module: main:app\n   Directory: /path/to/onevault_api\n   URL: http://localhost:8000\nINFO:     Uvicorn running on http://0.0.0.0:8000\n```\n\n### **One_Barn_AI Setup Success**\n```\n✅ One_Barn_AI setup completed successfully!\n🎉 DEMO READY - All Tests Passed!\n```\n\n---\n\n## 📚 **Next Steps After Local Testing**\n\n1. **Test passes locally** → Deploy API changes to Render\n2. **Database changes needed** → Apply migrations to production\n3. **Demo ready locally** → Test against production API\n4. **All tests pass** → Ready for July 7th demo!\n\n---\n\n## 💡 **Pro Tips**\n\n- **Use two terminals**: One for API server, one for testing\n- **Keep API server running**: Restart only when making code changes\n- **Check logs**: API server shows detailed request/response logs\n- **Test incrementally**: Start with health checks, then authentication, then full setup\n- **Save credentials**: Consider using `.env` file for repeated testing" 